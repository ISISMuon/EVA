

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unit testing &mdash; EVA 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Releasing versions" href="versioning.html" />
    <link rel="prev" title="GUI implementation" href="gui.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EVA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual.html">User manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dev_index.html">Developer documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_overview.html">Code overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui.html">GUI implementation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Unit testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-tests">System tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui-tests">GUI tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-config">Test config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-teardown">Test teardown</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automatic-testing-with-github-actions">Automatic testing with Github actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">Releasing versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_documentation.html">Writing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyinstaller.html">Building executables with pyinstaller</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">Code documentation</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EVA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="dev_index.html">Developer documentation</a></li>
      <li class="breadcrumb-item active">Unit testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/dev/unit_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="unit-testing">
<h1>Unit testing<a class="headerlink" href="#unit-testing" title="Link to this heading"></a></h1>
<p>EVA uses pytest and pytest-qt for unit testing. It is best practice to write a unit test for every new function / feature
that is added to the code. Currently, there are quite a few features in EVA which do not yet have unit tests and require manual testing.</p>
<p>The unit tests are located in the tests/ folder. Tests should be separate from the source code so that they can test the
program externally. The tests are separated into GUI test and system tests.</p>
<p>To run the tests, run the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span>
</pre></div>
</div>
<p>To run a specific folder or test simply specify the path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span><span class="n">gui</span>
</pre></div>
</div>
<p>To get console outputs (from print statements) use the -s flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="n">test</span><span class="o">/</span><span class="n">gui</span><span class="o">/</span><span class="n">test_manual</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">s</span>
</pre></div>
</div>
<p>Pytest introduces the concept of fixtures, which are very useful for writing clean and reusable tests. You can read
more about <a class="reference external" href="https://docs.pytest.org/en/6.2.x/fixture.html">fixtures here</a>.</p>
<section id="system-tests">
<h2>System tests<a class="headerlink" href="#system-tests" title="Link to this heading"></a></h2>
<p>System tests test the logic parts of the code. This includes database loading, mathematical functions and features in widget models.</p>
</section>
<section id="gui-tests">
<h2>GUI tests<a class="headerlink" href="#gui-tests" title="Link to this heading"></a></h2>
<p>GUI tests can be a little more involved as they tend to require the qtbot fixture to run properly.</p>
</section>
<section id="test-config">
<h2>Test config<a class="headerlink" href="#test-config" title="Link to this heading"></a></h2>
<p>conftest.py sets up the test environment before any tests are run. It overrides the app-cls fixtures to ensure that pytest
creates an instance of the custom QApplication class that EVA uses, and ensures that the app uses the appropriate test conditions.</p>
</section>
<section id="test-teardown">
<h2>Test teardown<a class="headerlink" href="#test-teardown" title="Link to this heading"></a></h2>
<p>If a test is altering the state of the program, it is important to ensure that any changes are reset before the test is finished,
otherwise the outcome of tests could depend on the order they are run in! The best way to do this is using fixtures and the yield keyword.
Read more about <a class="reference external" href="https://docs.pytest.org/en/6.2.x/fixture.html#safe-teardowns">teardown here</a>.</p>
</section>
<section id="automatic-testing-with-github-actions">
<h2>Automatic testing with Github actions<a class="headerlink" href="#automatic-testing-with-github-actions" title="Link to this heading"></a></h2>
<p>There is a github action set up which will run pytest every time a new pull request is made (in .github/workflows). This allows for automatically
checking if any new changes are breaking. This is why it is important to add more unit tests to EVA - the more tests,
the less likely it is that breaking changes / new bugs are introduced with updates.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gui.html" class="btn btn-neutral float-left" title="GUI implementation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="versioning.html" class="btn btn-neutral float-right" title="Releasing versions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, ISIS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>