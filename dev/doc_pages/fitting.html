

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fitting &mdash; EVA 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plotting" href="plotting.html" />
    <link rel="prev" title="Data searching" href="data_searching.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EVA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manual.html">User manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dev_index.html">Developer documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_overview.html">Code overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gui.html">GUI implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unit_testing.html">Unit testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Releasing versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../writing_documentation.html">Writing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pyinstaller.html">Building executables with pyinstaller</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../docs.html">Code documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="peak_finding.html">Peak Finding</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_searching.html">Data searching</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fitting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#EVA.core.fitting.fit_data.fit_gaussian_lmfit"><code class="docutils literal notranslate"><span class="pre">fit_gaussian_lmfit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#EVA.core.fitting.fit_data.fit_model_lmfit"><code class="docutils literal notranslate"><span class="pre">fit_model_lmfit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#EVA.core.fitting.fit_data.scaled_shifted_gaussians"><code class="docutils literal notranslate"><span class="pre">scaled_shifted_gaussians()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="plotting.html">Plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_structures.html">Data structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_loading.html">Data loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="physics.html">Physics</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EVA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../dev_index.html">Developer documentation</a></li>
          <li class="breadcrumb-item"><a href="../docs.html">Code documentation</a></li>
      <li class="breadcrumb-item active">Fitting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/dev/doc_pages/fitting.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-EVA.core.fitting.fit_data">
<span id="fitting"></span><h1>Fitting<a class="headerlink" href="#module-EVA.core.fitting.fit_data" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="EVA.core.fitting.fit_data.fit_gaussian_lmfit">
<span class="sig-prename descclassname"><span class="pre">EVA.core.fitting.fit_data.</span></span><span class="sig-name descname"><span class="pre">fit_gaussian_lmfit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#EVA.core.fitting.fit_data.fit_gaussian_lmfit" title="Link to this definition"></a></dt>
<dd><p>Fit a model containing N Gaussians using the least-squared method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_data</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – x-values to fit for</p></li>
<li><p><strong>y_data</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – y-values to fit for</p></li>
<li><p><strong>peak_params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – dictionary containing each peak to fit for and fit settings for each peak</p></li>
<li><p><strong>bg_params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – dictionary containing the background parameters and settings.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelResult</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>lmfit model result object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="EVA.core.fitting.fit_data.fit_model_lmfit">
<span class="sig-prename descclassname"><span class="pre">EVA.core.fitting.fit_data.</span></span><span class="sig-name descname"><span class="pre">fit_model_lmfit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constrain_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#EVA.core.fitting.fit_data.fit_model_lmfit" title="Link to this definition"></a></dt>
<dd><p>Fit a sum of previously defined fixed-shape N-Gaussian spectra with scale factors and shift parameters
for each spectrum using the least-squares method.</p>
<p>For example, if a spectrum containing multiple Gaussians has previously been fitted, this
function can be used to fit the shape of that spectrum to another dataset, holding the mean and standard deviations
of the previously fitted model fixed, only varying the scale factor and offset of the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_data</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – x-values to fit for</p></li>
<li><p><strong>y_data</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – y-values to fit for</p></li>
<li><p><strong>peak_params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – parameter dictionary for the gaussian peaks within each model</p></li>
<li><p><strong>bg_params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – background parameters</p></li>
<li><p><strong>model_params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – parameter dictionary for each model containing scale and offset parameters</p></li>
<li><p><strong>constrain_scale</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code> | <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span>) – if not None, all scale parameters will obey the constraint A + B … + Z = constrain_scale</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelResult</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>lmfit model result object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="EVA.core.fitting.fit_data.scaled_shifted_gaussians">
<span class="sig-prename descclassname"><span class="pre">EVA.core.fitting.fit_data.</span></span><span class="sig-name descname"><span class="pre">scaled_shifted_gaussians</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#EVA.core.fitting.fit_data.scaled_shifted_gaussians" title="Link to this definition"></a></dt>
<dd><p>Spectrum of multiple Gaussians, one for each set of peak parameters in ‘params’, with a vertical shift
parameter x0 and an overall scale factor ‘scale’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – input array to calculate for</p></li>
<li><p><strong>scale</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – intensity scale factor</p></li>
<li><p><strong>x0</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – vertical offset parameter</p></li>
<li><p><strong>params</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span>) – Gaussian peak parameter dict</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Array containing total spectrum from sum of all Gaussians.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data_searching.html" class="btn btn-neutral float-left" title="Data searching" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plotting.html" class="btn btn-neutral float-right" title="Plotting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, ISIS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>